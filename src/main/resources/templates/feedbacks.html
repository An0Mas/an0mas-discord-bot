<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/base}">

<head>
	<meta charset="UTF-8">
	<title>📬 フィードバック一覧</title>
	<th:block layout:fragment="head-extra">
		<link rel="stylesheet" th:href="@{/css/feedbacks.css}" />
	</th:block>
</head>

<body>
	<div layout:fragment="content">
		<div class="page-header">
			<h1>📬 フィードバック一覧</h1>
			<div class="feedback-count"
				th:text="'全 ' + ${totalCount} + ' 件中 ' + ${startCount} + '〜' + ${endCount} + ' 件を表示中'">
				件数
			</div>
		</div>

		<!-- ページネーション（上部） -->
		<div th:replace="~{fragments/pagination :: pagination(${currentPage}, ${totalPages}, '/feedbacks')}"></div>


		<div th:if="${message}" class="feedback-message">
			<p th:text="${message}">操作メッセージ</p>
		</div>

		<div th:each="fb : ${feedbacks}" class="feedback">
			<h2 th:text="${fb.title}">件名</h2>
			<div class="meta">
				<strong>ユーザー:</strong> <span th:text="${fb.userName}">匿名</span><br />
				<strong>日時:</strong> <span th:text="${fb.timestamp}">日時</span>
			</div>
			<p th:text="${fb.content}">本文</p>
			<form th:action="@{/feedbacks/delete}" method="post" onsubmit="return confirm('本当に削除しますか？');">
				<input type="hidden" name="id" th:value="${fb.id}" />
				<button type="submit" class="delete-btn" aria-label="削除" title="削除">🗑️ 削除</button>
			</form>
		</div>

		<!-- ページネーション（下部） -->
		<div th:replace="~{fragments/pagination :: pagination(${currentPage}, ${totalPages}, '/feedbacks')}"></div>
	</div>
</body>

</html>