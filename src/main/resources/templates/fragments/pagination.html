<!-- templates/fragments/pagination.html -->
<ul th:fragment="pagination(currentPage, totalPages, baseUrl)" th:with="startPage=${currentPage - 1 < 1 ? 1 : currentPage - 1},
             endPage=${currentPage + 1 > totalPages ? totalPages : currentPage + 1}"
	class="pagination justify-content-center my-4 flex-wrap gap-2">

	<!-- ← 前へ -->
	<li class="page-item" th:classappend="${currentPage == 1} ? ' disabled'">
		<a class="page-link" th:href="@{${baseUrl}(page=${currentPage - 1})}">← 前へ</a>
	</li>

	<!-- ✅ 7ページ以下の場合：全部表示 -->
	<th:block th:if="${totalPages <= 7}">
		<li th:each="i : ${#numbers.sequence(1, totalPages)}"
			th:class="'page-item' + (${i} == ${currentPage} ? ' active' : '')">
			<a class="page-link" th:href="@{${baseUrl}(page=${i})}" th:text="${i}">1</a>
		</li>
	</th:block>

	<!-- ✅ 7ページ以上の場合：省略付き -->
	<th:block th:if="${totalPages > 7}">
		<!-- 1ページ目＋... -->
		<th:block th:if="${currentPage > 3}">
			<li class="page-item">
				<a class="page-link" th:href="@{${baseUrl}(page=1)}">1</a>
			</li>
			<li class="page-item disabled"><a class="page-link">...</a></li>
		</th:block>

		<!-- 中央の範囲 -->
		<li th:each="i : ${#numbers.sequence(startPage, endPage)}"
			th:class="'page-item' + (${i} == ${currentPage} ? ' active' : '')">
			<a class="page-link" th:href="@{${baseUrl}(page=${i})}" th:text="${i}">1</a>
		</li>

		<!-- ...＋最終ページ -->
		<th:block th:if="${currentPage < totalPages - 2}">
			<li class="page-item disabled"><a class="page-link">...</a></li>
			<li class="page-item">
				<a class="page-link" th:href="@{${baseUrl}(page=${totalPages})}" th:text="${totalPages}">10</a>
			</li>
		</th:block>
	</th:block>

	<!-- → 次へ -->
	<li class="page-item" th:classappend="${currentPage == totalPages} ? ' disabled'">
		<a class="page-link" th:href="@{${baseUrl}(page=${currentPage + 1})}">次へ →</a>
	</li>
</ul>